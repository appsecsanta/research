```python
from __future__ import annotations

import os
from flask import Flask, jsonify
from flask_cors import CORS

ALLOWED_ORIGINS = os.getenv("CORS_ALLOWED_ORIGINS", "http://localhost:3000").split(",")


def create_app() -> Flask:
    app = Flask(__name__)

    CORS(
        app,
        resources={r"/api/*": {"origins": [o.strip() for o in ALLOWED_ORIGINS if o.strip()]}},
        supports_credentials=True,
        methods=["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"],
        allow_headers=["Content-Type", "Authorization"],
        expose_headers=["Content-Type"],
        max_age=86400,
    )

    @app.get("/api/health")
    def health():
        return jsonify(status="ok")

    return app


app = create_app()

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=int(os.getenv("PORT", "5000")), debug=True)
```