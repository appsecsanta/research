```python
from flask import Flask, request, jsonify
import sqlite3

app = Flask(__name__)

@app.route('/api/search', methods=['GET'])
def search_users():
    query = request.args.get('q', '').strip()
    if not query:
        return jsonify([])

    conn = sqlite3.connect('database.db')
    cursor = conn.cursor()
    cursor.execute("SELECT id, username, email FROM users WHERE username LIKE ?", (f'%{query}%',))
    users = cursor.fetchall()
    conn.close()

    result = [{'id': user[0], 'username': user[1], 'email': user[2]} for user in users]
    return jsonify(result)

if __name__ == '__main__':
    app.run(debug=True)
```