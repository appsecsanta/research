```javascript
const express = require('express');
const mongoose = require('mongoose');
const { body, param, validationResult } = require('express-validator');

// --- Mongoose User Model ---
// In a real application, this would be in its own file (e.g., models/user.model.js)
const userSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
    trim: true,
  },
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true,
    trim: true,
  },
  password: {
    type: String,
    required: true,
    select: false, // Never return password fields by default
  },
  role: {
    type: String,
    enum: ['user', 'admin', 'editor'],
    default: 'user',
  },
}, { timestamps: true });

const User = mongoose.model('User', userSchema);


// --- Middleware ---
// In a real application, these would be in their own files (e.g., middleware/)

/**
 * Placeholder for authentication middleware.
 * In a real app, this would verify a JWT or session and attach the user to req.user.
 */
const isAuthenticated = async (req, res, next) => {
  // For demonstration, we'll simulate fetching a user and attaching them.
  // Replace this with your actual authentication logic.
  try {
    // Let's assume the request is made by an admin user for this example.
    // In a real scenario, you'd get the user ID from a decoded JWT.
    const adminUser = await User.findOne({ role: 'admin' });
    if (!adminUser) {
      // If no admin exists for the demo, create one.
      console.log('Creating a dummy admin user for demonstration...');
      const demoAdmin = new User({
        name: 'Admin User',
        email: `admin@example.com`,
        password: 'hashed_password', // Use bcrypt in a real app
        role: 'admin',
      });
      req.user = await demoAdmin.save();
    } else {
      req.user = adminUser;
    }
    next();
  } catch (error) {
    return res.status(500).json({ message: 'Authentication simulation failed.', error: error.message });
  }
};

/**
 * Authorization middleware to check for admin role.
 */
const isAdmin = (req, res, next) => {
  if (req.user && req.user.role === 'admin') {
    return next();
  }
  return res.status(403).json({ message: 'Access denied. Administrator privileges required.' });
};


// --- Express Router ---
// In a real application, this would be in its own file (e.g., routes/user.routes.js)
const router = express.Router();

const updateUserRoleValidators = [
  param('id').isMongoId().withMessage('Invalid user ID format.'),
  body('role')
    .notEmpty().withMessage('Role is required.')
    .isIn(['user', 'admin', 'editor']).withMessage('Invalid role specified.'),
];

router.put(
  '/users/:id/role',
  isAuthenticated,
  isAdmin,
  updateUserRoleValidators,
  async (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }

    const { id } = req.params;
    const { role } = req.body;

    try {
      // Prevent an admin from accidentally demoting themselves if they are the only admin
      if (req.user.id === id && req.user.role === 'admin' && role !== 'admin') {
        const adminCount = await User.countDocuments({ role: 'admin' });
        if (adminCount <= 1) {
          return res.status(400).json({
            message: 'Cannot change role. You are the only administrator.',
          });
        }
      }

      const updatedUser = await User.findByIdAndUpdate(
        id,
        { role },
        { new: true, runValidators: true }
      );

      if (!updatedUser) {
        return res.status(404).json({ message: 'User not found.' });
      }

      res.status(200).json({
        message: 'User role updated successfully.',
        user: updatedUser,
      });
    } catch (error) {
      console.error('Error updating user role:', error);
      res.status(500).json({ message: 'An internal server error occurred.' });
    }
  }
);

module.exports = { router, User };

/*
// --- Example Server Setup ---
// To run this code, you would have a main server file (e.g., app.js) like this:

const express = require('express');
const mongoose = require('mongoose');
const { router: userRouter } = require('./path/to/this/file'); // Adjust path accordingly

const app = express();
const PORT = process.env.PORT || 3000;
const MONGO_URI = process.env.MONGO_URI || 'mongodb://localhost:27017/user_roles_db';

// Middleware
app.use(express.json());

// Routes
app.use('/api', userRouter);

// Database Connection and Server Start
mongoose.connect(MONGO_URI)
  .then(() => {
    console.log('Successfully connected to MongoDB.');
    app.listen(PORT, () => {
      console.log(`Server is running on http://localhost:${PORT}`);
    });
  })
  .catch(err => {
    console.error('Database connection error:', err);
    process.exit(1);
  });
*/
```